{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Semantic Recipe Finder Documentation","text":"<p>Welcome!</p> <p>This application uses natural language semantic search to help you discover recipes intelligently.</p>"},{"location":"#documentation-sections","title":"\ud83d\udcda Documentation Sections","text":"\ud83c\udfd7\ufe0f Architecture\ud83d\udcd6 API Reference <p>System Architecture</p> <p>Learn about the system architecture, data flow, and core technologies powering the semantic search.</p> <p>API Documentation</p> <p>Complete API documentation with request/response examples and endpoint specifications.</p>"},{"location":"#quick-links","title":"\ud83d\ude80 Quick Links","text":"<p>Live Resources</p> <ul> <li>\ud83c\udf10 Live Demo: HuggingFace Spaces</li> <li>\ud83d\udcbb GitHub Repository: semantic-recipe-finder</li> <li>\ud83d\udc1b Issue Tracker: GitHub Issues</li> </ul>"},{"location":"#key-features","title":"\u2728 Key Features","text":"\ud83d\udd0d Natural Language\u26a1 Fast Vector Search\ud83c\udfd7\ufe0f Modern Stack\ud83d\udce6 Production Ready\u2705 Well Documented <p>Query recipes using everyday language</p> <p>Powered by ChromaDB and sentence-transformers</p> <p>FastAPI backend + Streamlit frontend</p> <p>Docker support with comprehensive testing</p> <p>61 tests with 100% passing rate</p>"},{"location":"#use-cases","title":"\ud83c\udfaf Use Cases","text":"<p>Recipe Discovery</p> <p>Find recipes based on ingredients, cuisine, or cooking style</p> <p>Dietary Filtering</p> <p>Search for recipes matching specific dietary requirements</p> <p>Time-Based Search</p> <p>Discover quick meals or elaborate dishes</p> <p>Semantic Understanding</p> <p>Natural queries like \"healthy vegetarian dinner under 30 minutes\"</p>"},{"location":"#technology-overview","title":"\ud83d\udee0\ufe0f Technology Overview","text":"Component Technology Backend FastAPI 0.115.6 Frontend Streamlit 1.41.1 ML Model sentence-transformers (all-MiniLM-L6-v2) Vector DB ChromaDB 0.5.23 Testing pytest 9.0.2 (61 tests) Deployment Docker, docker-compose"},{"location":"#dataset","title":"\ud83d\udcca Dataset","text":"Dataset Details <ul> <li>\ud83d\udcda 10000 recipes from Food.com dataset</li> <li>\ud83d\udd22 384-dimensional embeddings for semantic search</li> <li>\ud83d\udcdd Rich metadata: ingredients, instructions, nutrition, ratings</li> <li>\ud83d\udcbe Persistent storage with ChromaDB</li> </ul>"},{"location":"#getting-help","title":"\ud83e\udd1d Getting Help","text":"<p>Need Support?</p> <ul> <li>\ud83d\udc1b Found a bug? Open an issue</li> <li>\ud83d\udce7 Contact: hanifekaptan.dev@gmail.com</li> </ul>"},{"location":"#license","title":"\ud83d\udcc4 License","text":"<p>License</p> <p>This project is open source and available under the Apache Licence.</p> <p>Navigation: Home | Architecture | API</p>"},{"location":"api/","title":"API Reference","text":"<p>Overview</p> <p>Complete API documentation for the Semantic Recipe Finder backend.</p>"},{"location":"api/#base-url","title":"\ud83c\udf10 Base URL","text":"DevelopmentProduction <pre><code>http://localhost:8000\n</code></pre> <p><pre><code>https://semantic-recipe-finder.hf.space\n</code></pre> HuggingFace Spaces deployment</p>"},{"location":"api/#interactive-documentation","title":"\ud83d\udcda Interactive Documentation","text":"<p>FastAPI Auto-Generated Docs</p> <p>FastAPI provides interactive API documentation:</p> <ul> <li>\ud83d\udcd6 Swagger UI: <code>{BASE_URL}/docs</code></li> <li>\ud83d\udcd8 ReDoc: <code>{BASE_URL}/redoc</code></li> <li>\ud83d\udcc4 OpenAPI Schema: <code>{BASE_URL}/openapi.json</code></li> </ul>"},{"location":"api/#authentication","title":"\ud83d\udd13 Authentication","text":"<p>Public Access</p> <p>No authentication required (public demo application).</p>"},{"location":"api/#endpoints","title":"\ud83d\udd0c Endpoints","text":""},{"location":"api/#health-check","title":"Health Check","text":"<p>Endpoint</p> <p><code>GET /health</code></p> <p>Description</p> <p>Check if the backend is ready to serve requests.</p> RequestResponse: 200 OKExample <p>No parameters required</p> <pre><code>{\n  \"status\": \"ok\",\n  \"ready\": true\n}\n</code></pre> <p>Response Fields:</p> <ul> <li><code>status</code> (string): Health status indicator (\"ok\" or \"error\")</li> <li><code>ready</code> (boolean): Whether all services are initialized</li> </ul> <pre><code>curl http://localhost:8000/health\n</code></pre> <p>Response: <pre><code>{\n  \"status\": \"ok\",\n  \"ready\": true\n}\n</code></pre></p>"},{"location":"api/#search-recipes","title":"Search Recipes","text":"<p>Endpoint</p> <p><code>POST /search</code></p> <p>Description</p> <p>Perform semantic search on recipes using natural language queries.</p> \ud83d\udce5 Request\ud83d\udce4 Response: 200 OK\u274c Error Responses\ud83d\udca1 Examples <p>Content-Type: <code>application/json</code></p> <pre><code>{\n  \"query\": \"string\",\n  \"offset\": 0,\n  \"limit\": 20\n}\n</code></pre> <p>Request Fields:</p> <ul> <li><code>query</code> (string, required): Natural language search query<ul> <li>Example: \"quick pasta dinner\"</li> <li>Example: \"healthy vegetarian meal\"</li> <li>Example: \"chocolate dessert under 30 minutes\"</li> </ul> </li> <li><code>offset</code> (integer, optional): Number of results to skip (default: 0)</li> <li><code>limit</code> (integer, optional): Maximum results per page (default: 20, max: 100)</li> </ul> <pre><code>{\n  \"search_results\": [\n    {\n      \"recipe_id\": 123,\n      \"similarity_score\": 0.87,\n      \"card\": {\n        \"recipe_id\": 123,\n        \"name\": \"Quick Pasta Carbonara\",\n        \"description\": \"Creamy Italian pasta with eggs and bacon\",\n        \"recipe_category\": \"Main Course\",\n        \"keywords\": [\"pasta\", \"italian\", \"quick\", \"comfort-food\"],\n        \"n_ingredients\": 5,\n        \"total_time_minutes\": 20,\n        \"calories\": 450.0,\n        \"aggregated_rating\": 4.5\n      }\n    }\n  ],\n  \"total_results\": 42,\n  \"offset\": 0,\n  \"limit\": 20\n}\n</code></pre> <p>Response Fields:</p> <ul> <li><code>search_results</code> (array): List of search result objects<ul> <li><code>recipe_id</code> (integer): Unique recipe identifier</li> <li><code>similarity_score</code> (float): Cosine similarity score (0-1, higher is better)</li> <li><code>card</code> (object): Recipe card data</li> </ul> </li> <li><code>total_results</code> (integer): Total matching recipes (before pagination)</li> <li><code>offset</code> (integer): Current offset</li> <li><code>limit</code> (integer): Current limit</li> </ul> <p>422 Unprocessable Entity - Invalid request body</p> <pre><code>{\n  \"detail\": [\n    {\n      \"loc\": [\"body\", \"query\"],\n      \"msg\": \"field required\",\n      \"type\": \"value_error.missing\"\n    }\n  ]\n}\n</code></pre> <p>500 Internal Server Error - Search execution failed</p> <pre><code>{\n  \"detail\": \"Search execution failed\"\n}\n</code></pre> <p>Basic Search: <pre><code>curl -X POST http://localhost:8000/search \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\"query\": \"pasta\"}'\n</code></pre></p> <p>Paginated Search: <pre><code>curl -X POST http://localhost:8000/search \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\n    \"query\": \"vegetarian dinner\",\n    \"offset\": 0,\n    \"limit\": 10\n  }'\n</code></pre></p> <p>Python Example: <pre><code>import httpx\n\nresponse = httpx.post(\n    \"http://localhost:8000/search\",\n    json={\n        \"query\": \"quick healthy breakfast\",\n        \"offset\": 0,\n        \"limit\": 20\n    }\n)\n\ndata = response.json()\nfor result in data[\"search_results\"]:\n    print(f\"{result['card']['name']}: {result['similarity_score']:.2f}\")\n</code></pre></p>"},{"location":"api/#get-recipe-detail","title":"Get Recipe Detail","text":"<p>Endpoint</p> <p><code>GET /recipe/{recipe_id}</code></p> <p>Description</p> <p>Retrieve full details for a specific recipe.</p> \ud83d\udce5 Request\ud83d\udce4 Response: 200 OK\u274c Error: 404 Not Found\ud83d\udca1 Examples <p>Path Parameters:</p> <ul> <li><code>recipe_id</code> (integer, required): Unique recipe identifier</li> </ul> <pre><code>{\n  \"recipe_id\": 123,\n  \"name\": \"Quick Pasta Carbonara\",\n  \"description\": \"Creamy Italian pasta with eggs and bacon\",\n  \"recipe_category\": \"Main Course\",\n  \"keywords\": [\"pasta\", \"italian\", \"quick\", \"comfort-food\"],\n  \"ingredients\": [\n    \"200g spaghetti\",\n    \"100g bacon\",\n    \"2 eggs\",\n    \"50g parmesan cheese\",\n    \"black pepper to taste\"\n  ],\n  \"instructions\": [\n    \"Cook spaghetti according to package directions\",\n    \"Fry bacon until crispy\",\n    \"Beat eggs with parmesan cheese\",\n    \"Drain pasta and mix with bacon\",\n    \"Remove from heat and stir in egg mixture\",\n    \"Season with black pepper and serve\"\n  ],\n  \"n_ingredients\": 5,\n  \"total_time_minutes\": 20,\n  \"calories\": 450.0,\n  \"fat_content\": 18.0,\n  \"protein_content\": 22.0,\n  \"sugar_content\": 2.0,\n  \"carbohydrate_content\": 55.0,\n  \"aggregated_rating\": 4.5,\n  \"fat_content_perc\": 28.0,\n  \"protein_content_perc\": 34.0,\n  \"sugar_content_perc\": 3.0,\n  \"carbohydrate_content_perc\": 85.0\n}\n</code></pre> Response Fields <ul> <li><code>recipe_id</code>, <code>name</code>, <code>description</code>, <code>recipe_category</code></li> <li><code>keywords</code>, <code>ingredients</code>, <code>instructions</code></li> <li><code>n_ingredients</code>, <code>total_time_minutes</code></li> <li><code>calories</code>, <code>fat_content</code>, <code>protein_content</code>, <code>sugar_content</code>, <code>carbohydrate_content</code></li> <li><code>aggregated_rating</code></li> </ul> <pre><code>{\n  \"detail\": \"Recipe not found\"\n}\n</code></pre> <p>Basic Request: <pre><code>curl http://localhost:8000/recipe/123\n</code></pre></p> <p>Python Example: <pre><code>import httpx\n\nrecipe_id = 123\nresponse = httpx.get(f\"http://localhost:8000/recipe/{recipe_id}\")\n\nif response.status_code == 200:\n    recipe = response.json()\n    print(f\"Recipe: {recipe['name']}\")\n    print(f\"Ingredients: {len(recipe['ingredients'])}\")\n    print(f\"Steps: {len(recipe['instructions'])}\")\nelif response.status_code == 404:\n    print(\"Recipe not found\")\n</code></pre></p>"},{"location":"api/#data-models","title":"\ud83d\udccb Data Models","text":"SearchQuery <p>Request model for search endpoint.</p> <pre><code>class SearchQuery(BaseModel):\n    query: str\n    offset: int = 0\n    limit: int = 20\n</code></pre> RecipeCard <p>Compact recipe information for search results.</p> <pre><code>class RecipeCard(BaseModel):\n    recipe_id: int\n    name: Optional[str] = None\n    description: Optional[str] = None\n    recipe_category: Optional[str] = None\n    keywords: List[str] = []\n    n_ingredients: Optional[int] = None\n    total_time_minutes: Optional[int] = None\n    calories: Optional[float] = None\n    aggregated_rating: Optional[float] = None\n</code></pre> SearchResult <p>Single search result with similarity score.</p> <pre><code>class SearchResult(BaseModel):\n    recipe_id: int\n    similarity_score: float\n    card: RecipeCard\n</code></pre> SearchResponse <p>Complete search response with pagination.</p> <pre><code>class SearchResponse(BaseModel):\n    search_results: List[SearchResult]\n    total_results: int\n    offset: int\n    limit: int\n</code></pre> RecipeDetail <p>Full recipe information.</p> <pre><code>class RecipeDetail(BaseModel):\n    recipe_id: int\n    name: Optional[str] = None\n    description: Optional[str] = None\n    recipe_category: Optional[str] = None\n    keywords: List[str] = []\n    ingredients: List[str] = []\n    instructions: List[str] = []\n    n_ingredients: Optional[int] = None\n    total_time_minutes: Optional[int] = None\n    calories: Optional[float] = None\n    fat_content: Optional[float] = None\n    protein_content: Optional[float] = None\n    sugar_content: Optional[float] = None\n    carbohydrate_content: Optional[float] = None\n    fat_content_perc: Optional[float] = None\n    protein_content_perc: Optional[float] = None\n    sugar_content_perc: Optional[float] = None\n    carbohydrate_content_perc: Optional[float] = None\n</code></pre>"},{"location":"api/#query-examples","title":"\ud83d\udca1 Query Examples","text":"<p>Natural Language Understanding</p> <p>The semantic search understands context and synonyms:</p> \ud83c\udf5d Cuisine-based\ud83e\udd57 Dietary\u23f1\ufe0f Time-based\ud83e\udd55 Ingredient-based\ud83c\udf7d\ufe0f Meal type\ud83d\udc68\u200d\ud83c\udf73 Cooking style\ud83d\udd17 Combined queries <ul> <li>\"Italian pasta dishes\"</li> <li>\"Mexican tacos\"</li> <li>\"Asian stir fry\"</li> </ul> <ul> <li>\"vegetarian dinner\"</li> <li>\"low carb breakfast\"</li> <li>\"high protein snack\"</li> </ul> <ul> <li>\"quick 15 minute meal\"</li> <li>\"slow cooker recipes\"</li> <li>\"make ahead desserts\"</li> </ul> <ul> <li>\"chicken breast recipes\"</li> <li>\"uses tomatoes\"</li> <li>\"chocolate desserts\"</li> </ul> <ul> <li>\"breakfast ideas\"</li> <li>\"lunch for work\"</li> <li>\"dinner party main course\"</li> </ul> <ul> <li>\"baked chicken\"</li> <li>\"grilled vegetables\"</li> <li>\"no bake desserts\"</li> </ul> <ul> <li>\"quick healthy vegetarian dinner\"</li> <li>\"easy chicken pasta under 30 minutes\"</li> <li>\"low carb high protein breakfast\"</li> </ul>"},{"location":"api/#rate-limiting","title":"\u26a1 Rate Limiting","text":"<p>Current Status</p> <p>No rate limiting implemented (demo application).</p> Production Recommendations <ul> <li>Rate limiting per IP</li> <li>API key authentication</li> <li>Request throttling</li> </ul>"},{"location":"api/#cors-configuration","title":"\ud83c\udf10 CORS Configuration","text":"<p>Current Configuration</p> <p>CORS is enabled for all origins in development.</p> Production Setup <p>Restrict to specific domains:</p> <pre><code>app.add_middleware(\n    CORSMiddleware,\n    allow_origins=[\"https://your-frontend-domain.com\"],\n    allow_credentials=True,\n    allow_methods=[\"*\"],\n    allow_headers=[\"*\"],\n)\n</code></pre>"},{"location":"api/#error-handling","title":"\u26a0\ufe0f Error Handling","text":"<p>HTTP Status Codes</p> <p>All endpoints return standard HTTP status codes:</p> Status Meaning <code>200 OK</code> \u2705 Successful request <code>404 Not Found</code> \u274c Resource not found <code>422 Unprocessable Entity</code> \u26a0\ufe0f Validation error <code>500 Internal Server Error</code> \ud83d\udd25 Server error <p>Error Response Format</p> <p>Error responses include a <code>detail</code> field with error description.</p> <p>Navigation: Home | Architecture | API</p>"},{"location":"architecture/","title":"System Architecture","text":"<p>This document describes the architecture, design decisions, and data flow of the Semantic Recipe Finder application.</p>"},{"location":"architecture/#high-level-architecture","title":"\ud83c\udfd7\ufe0f High-Level Architecture","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510         \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502   Streamlit  \u2502\u25c4\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25ba\u2502   FastAPI    \u2502\n\u2502   Frontend   \u2502  HTTP   \u2502   Backend    \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518         \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                                \u2502\n                    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n                    \u25bc           \u25bc           \u25bc\n              \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n              \u2502 ChromaDB\u2502 \u2502DataFrame\u2502 \u2502  Model  \u2502\n              \u2502 Vector  \u2502 \u2502 Recipe  \u2502 \u2502sentence \u2502\n              \u2502  Store  \u2502 \u2502  Data   \u2502 \u2502transform\u2502\n              \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"architecture/#component-overview","title":"\ud83d\udce6 Component Overview","text":""},{"location":"architecture/#frontend-streamlit","title":"Frontend (Streamlit)","text":"<p>Purpose</p> <p>User-facing interface for recipe search and browsing</p> <p>Technology Stack</p> <p>Streamlit 1.41.1 with component-based architecture</p> <p>Key Components:</p> Search BarRecipe CardRecipe DetailHeader <p><code>search_bar.py</code> - Query input with real-time validation</p> <p><code>recipe_card.py</code> - Compact recipe display for search results</p> <p><code>recipe_detail.py</code> - Full recipe view with ingredients and instructions</p> <p><code>header.py</code> - App navigation and branding</p> <p>State Management: - Uses Streamlit session state for search results caching - Maintains navigation state between search and detail views - API client handles backend communication with error handling</p> <p>Communication: - HTTP client (<code>httpx</code>) for API requests - Configurable backend URL via <code>API_BASE_URL</code> environment variable - Error handling with user-friendly messages</p>"},{"location":"architecture/#backend-fastapi","title":"Backend (FastAPI)","text":"<p>Purpose</p> <p>RESTful API providing semantic search and recipe data</p> <p>Technology Stack</p> <p>FastAPI 0.115.6 with async support</p> <p>Architecture Layers:</p> \ud83c\udf10 API Layer\u2699\ufe0f Service Layer\ud83d\udccb Model Layer\ud83d\udd27 Utility Layer <p>Location: <code>app/api/</code></p> <ul> <li><code>health.py</code> - Health check endpoint</li> <li><code>search.py</code> - Semantic search endpoint with pagination</li> <li><code>routes.py</code> - Recipe detail retrieval</li> </ul> <p>Location: <code>app/services/</code></p> <ul> <li><code>search_service.py</code> - Search orchestration and result building</li> <li><code>detail_service.py</code> - Recipe detail retrieval from DataFrame</li> <li><code>vectorstore.py</code> - ChromaDB operations and vector search</li> <li><code>loading_service.py</code> - Startup data and model loading</li> </ul> <p>Location: <code>app/models/</code></p> <ul> <li>Pydantic models for request/response validation</li> <li>Type safety and automatic API documentation</li> <li>Models: <code>RecipeCard</code>, <code>RecipeDetail</code>, <code>SearchQuery</code>, <code>SearchResponse</code></li> </ul> <p>Location: <code>app/utils/</code></p> <ul> <li><code>data_preprocessor.py</code> - Text cleaning (lowercase, remove digits/punctuation)</li> <li><code>vectorizer.py</code> - Text-to-vector conversion with normalization</li> </ul>"},{"location":"architecture/#vector-database-chromadb","title":"Vector Database (ChromaDB)","text":"<p>Purpose</p> <p>Efficient similarity search on recipe embeddings</p> <p>Technology Stack</p> <p>ChromaDB 0.5.23 with DuckDB+Parquet backend</p> Configuration Details <ul> <li>Dimension: 384 (from <code>all-MiniLM-L6-v2</code> model)</li> <li>Distance Metric: Cosine similarity (default)</li> <li>Persistence: <code>data/processed/persist/</code> directory</li> <li>Collection: Single <code>recipes</code> collection with 100 embeddings</li> </ul> <p>Key Operations:</p> InitializeSearchNormalize <p><code>load_or_build_collection()</code> - Initialize or load existing collection</p> <p><code>search_collection(query_vector, top_k)</code> - Vector similarity search</p> <p>Automatic normalization of query vectors for consistent results</p>"},{"location":"architecture/#machine-learning-model","title":"Machine Learning Model","text":"<p>Model</p> <p><code>sentence-transformers/all-MiniLM-L6-v2</code></p> Specifications <ul> <li>Architecture: MiniLM (distilled BERT)</li> <li>Output: 384-dimensional dense vectors</li> <li>Training: Trained on 1B+ sentence pairs</li> <li>Performance: ~120M parameters, fast inference (~50ms per query)</li> <li>Use Case: Optimized for semantic similarity tasks</li> </ul> <p>Why This Model?</p> <p>\u2705 Small size (90MB) suitable for CPU inference \u2705 Good balance between speed and quality \u2705 Widely used and well-documented \u2705 No GPU required for production deployment</p>"},{"location":"architecture/#data-flow","title":"\ud83d\udd04 Data Flow","text":""},{"location":"architecture/#search-request-flow","title":"Search Request Flow","text":"1\ufe0f\u20e3 User Input2\ufe0f\u20e3 Frontend Processing3\ufe0f\u20e3 Backend API Layer4\ufe0f\u20e3 Service Layer Processing5\ufe0f\u20e3 Vector Search6\ufe0f\u20e3 Recipe Data Retrieval7\ufe0f\u20e3 Frontend Rendering <pre><code>User enters: \"quick vegetarian pasta\"\n</code></pre> <ul> <li>Streamlit validates input (non-empty)</li> <li>Sends POST request to <code>/search</code> endpoint</li> <li>Includes pagination params (offset, limit)</li> </ul> <ul> <li>FastAPI receives request</li> <li>Validates with <code>SearchQuery</code> Pydantic model</li> <li>Passes to <code>SearchService</code></li> </ul> <pre><code># search_service.py\n1. Clean query text (remove special chars, lowercase)\n2. Vectorize with sentence-transformers model\n3. Normalize vector (L2 norm)\n4. Call ChromaDB for similarity search (top 100)\n5. Retrieve recipe data from DataFrame\n6. Build RecipeCard objects\n7. Apply pagination (offset/limit)\n8. Return SearchResponse\n</code></pre> <pre><code># vectorstore.py\n1. Receive 384-dim query vector\n2. Query ChromaDB collection\n3. ChromaDB computes cosine similarity with all 100 vectors\n4. Return top_k recipe IDs and similarity scores\n</code></pre> <pre><code># search_service.py -&gt; get_recipe_cards()\n1. Receive list of recipe IDs from ChromaDB\n2. Lookup each ID in pandas DataFrame\n3. Extract required fields for RecipeCard\n4. Handle missing/invalid IDs gracefully\n5. Return list of RecipeCard objects\n</code></pre> <ul> <li>Receive paginated results</li> <li>Display recipe cards in grid layout</li> <li>Show similarity scores</li> <li>Enable click-through to detail view</li> </ul>"},{"location":"architecture/#recipe-detail-flow","title":"Recipe Detail Flow","text":"1\ufe0f\u20e3 User Action2\ufe0f\u20e3 Navigation3\ufe0f\u20e3 API Request4\ufe0f\u20e3 Data Retrieval5\ufe0f\u20e3 Response6\ufe0f\u20e3 Render <p>User clicks recipe card</p> <p>Frontend navigates to detail page with <code>recipe_id</code></p> <p>GET request to <code>/recipe/{recipe_id}</code></p> <p><code>DetailService</code> retrieves full recipe from DataFrame</p> <p>Returns <code>RecipeDetail</code> with all fields</p> <p>Frontend renders detailed view</p>"},{"location":"architecture/#data-storage","title":"\ud83d\uddc4\ufe0f Data Storage","text":"\ud83d\udcca Recipe DataFrame\ud83d\udd22 Embeddings Storage <p>Format</p> <p>Pandas DataFrame loaded from <code>recipes.csv</code></p> <p>Index</p> <p><code>recipe_id</code> (integer)</p> Columns (subset used) <ul> <li><code>name</code>, <code>description</code>, <code>recipe_category</code></li> <li><code>keywords</code> (list), <code>ingredients</code> (list), <code>instructions</code> (list)</li> <li><code>n_ingredients</code>, <code>total_time_minutes</code></li> <li><code>calories</code>, <code>fat_content</code>, <code>protein_content</code>, <code>carbohydrate_content</code></li> <li><code>aggregated_rating</code></li> </ul> <p>Access Pattern</p> <p>\u2705 Loaded once at startup \u2705 Stored in <code>config.df</code> for global access \u2705 Indexed access by <code>recipe_id</code> (O(1) lookup)</p> <p>Files</p> <ul> <li><code>ids_embs.npy</code> - Recipe IDs (1D array)</li> <li><code>metadata_embs.npy</code> - Embeddings (2D array, shape: [100, 384])</li> </ul> Loading Process <ol> <li>Read at startup by <code>loading_service.py</code></li> <li>Inserted into ChromaDB collection</li> <li>Used for vector similarity search</li> </ol> Pre-computation Details <ul> <li>Embeddings pre-computed offline (see <code>notebooks/vectorize.py</code>)</li> <li>Combines: name + description + category + keywords</li> <li>Normalized to unit length</li> </ul>"},{"location":"architecture/#configuration","title":"\ud83d\udd27 Configuration","text":"\u2699\ufe0f Global Config\ud83d\ude80 Startup Sequence <p>Location: <code>app/core/config.py</code></p> <p>Singleton pattern for application state</p> <pre><code>class Config:\n    ready: bool = False           # App initialization status\n    model: SentenceTransformer    # Loaded ML model\n    df: pd.DataFrame              # Recipe data\n    search_service: SearchService # Initialized service\n    detail_service: DetailService # Initialized service\n</code></pre> <p>Location: <code>app/main.py</code></p> <p>Application initialization workflow</p> <pre><code>@app.on_event(\"startup\")\nasync def startup_event():\n    1. Load sentence-transformer model\n    2. Load recipe DataFrame from CSV\n    3. Initialize ChromaDB collection\n    4. Load pre-computed embeddings\n    5. Initialize services\n    6. Set config.ready = True\n</code></pre>"},{"location":"architecture/#testing-architecture","title":"\ud83e\uddea Testing Architecture","text":"Test Structure <pre><code>tests/\n\u251c\u2500\u2500 integration/\n\u2502   \u2514\u2500\u2500 test_smoke_api.py        # Full API testing (15 tests)\n\u2514\u2500\u2500 unit/\n    \u251c\u2500\u2500 services/\n    \u2502   \u251c\u2500\u2500 test_search_service.py    # SearchService (21 tests)\n    \u2502   \u2514\u2500\u2500 test_detail_service.py    # DetailService (7 tests)\n    \u2514\u2500\u2500 utils/\n        \u251c\u2500\u2500 test_preprocessor_new.py  # Text cleaning (13 tests)\n        \u2514\u2500\u2500 test_vectorizer_new.py    # Vectorization (7 tests)\n</code></pre> \ud83d\udd0c Integration Tests\ud83e\udde9 Unit Tests <ul> <li>Mock <code>search_collection()</code> to avoid ChromaDB dependency</li> <li>Use <code>FastAPI.TestClient</code> for HTTP request simulation</li> <li>Mock model with 384-dim vectors</li> </ul> <ul> <li>Mock external dependencies (model, ChromaDB)</li> <li>Test edge cases (empty queries, missing data)</li> <li>Verify error handling and fallback logic</li> </ul> <p>Coverage Summary</p> <ul> <li>Total Tests: 61</li> <li>Pass Rate: 100% \u2705</li> <li>Coverage Areas:<ul> <li>API endpoints (health, search, detail)</li> <li>Service layer logic</li> <li>Text preprocessing</li> <li>Vector operations</li> <li>Error handling</li> </ul> </li> </ul>"},{"location":"architecture/#performance-considerations","title":"\ud83d\ude80 Performance Considerations","text":"\u26a1 Backend Optimization\ud83d\udcc8 Scalability <p>Startup Loading</p> <p>\u2705 All data loaded once at startup \u2705 Models cached in memory \u2705 No per-request model loading</p> <p>Vector Search</p> <p>\u2705 ChromaDB uses efficient indexing \u2705 Pre-normalized embeddings \u2705 Fast cosine similarity computation</p> <p>DataFrame Access</p> <p>\u2705 Indexed by recipe_id for O(1) lookup \u2705 Minimal memory footprint (100 recipes) \u2705 No database queries needed</p> <p>Current Scale</p> <p>100 recipes (proof-of-concept)</p> To Scale Up <ul> <li>\ud83d\udd3c Increase ChromaDB collection size</li> <li>\ud83d\udce6 Add batch processing for embeddings</li> <li>\ud83d\udcbe Consider caching layer (Redis)</li> <li>\u2696\ufe0f Deploy with load balancer</li> <li>\ud83c\udfae Use GPU for model inference at scale</li> </ul>"},{"location":"architecture/#security","title":"\ud83d\udd12 Security","text":"<p>Security Considerations</p> <p>\u26a0\ufe0f No authentication (demo application) \u2705 Input validation with Pydantic \u2705 CORS enabled for frontend communication \u2705 No user data storage \u2705 Static dataset (no user-generated content)</p>"},{"location":"architecture/#design-decisions","title":"\ud83d\udcdd Design Decisions","text":"\ud83d\uddc4\ufe0f ChromaDB\ud83e\udd16 Sentence-Transformers\ud83c\udfa8 Streamlit\u26a1 FastAPI <p>Why ChromaDB?</p> <p>\u2705 Easy setup with minimal configuration \u2705 Supports persistent storage out-of-the-box \u2705 Good performance for &lt;10k vectors \u2705 Python-native with good documentation</p> <p>Why Sentence-Transformers?</p> <p>\u2705 State-of-the-art semantic similarity \u2705 Easy integration with HuggingFace \u2705 No API keys or external services needed \u2705 Fast inference on CPU</p> <p>Why Streamlit?</p> <p>\u2705 Rapid prototyping for ML/AI apps \u2705 Built-in state management \u2705 Easy deployment to Spaces \u2705 Component-based architecture</p> <p>Why FastAPI?</p> <p>\u2705 Modern async Python framework \u2705 Automatic OpenAPI documentation \u2705 Type safety with Pydantic \u2705 High performance (comparable to Node.js)</p> <p>Navigation: Home | Architecture | API</p>"}]}